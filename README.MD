# Bank account spring boot app

A simple spring boot REST api application that allows user to create a bank account with nick name.

It allows users to:

- Create a bank account
- Retrieve a bank account by ID
- Validate inputs
- Enforces business rules outlined below; Auto generates account number and ID

Account data model:

- Account number (Autogenerated by the api)
- Id (Autogenerated by the api)
- Customer name (input : Mandatory)
- Account nick name (input : optional)

## Business Rules

- Account Nick name should be between 5 to 30 characters.
- A customer cannot create more than 5 accounts.
- To ensure that the nick name is not offensive, the nick name should not be "badword", "offensive" or "nasty"

## ðŸ“š Tech Stack

- Java 17+
- Spring Boot 3
- Spring Web
- Spring Data JPA
- H2 Database (In-Memory)
- Gradle Build Tool

---

## ðŸš€ Getting Started

### Prerequisites

- Java 17+
- Gradle installed (or use the Gradle Wrapper `./gradlew`)
- IDE like IntelliJ, Eclipse, or VSCode

### Run the application

```bash
./gradlew bootRun
```

## Dev Notes

The application will start on: http://localhost:8080

Under the hood we use H2 in memory database to emulate a postgres sql like environment.
H2 database console is enabled at http://localhost:8080/h2-console/. Please open this link to see the changes on the database visually with the db connection details below.

### H2 Console details

Driver Class: org.h2.Driver
JDBC URL: jdbc:h2:mem:bankdb
User Name: sa
Password: (empty)

---

## API Endpoints

| Method | URL                  | Description                   | Request Body | Response             |
| :----- | :------------------- | :---------------------------- | :----------- | :------------------- |
| POST   | `/api/accounts`      | Create a new bank account     | JSON         | Created Account JSON |
| GET    | `/api/accounts/{id}` | Retrieve a bank account by ID | -            | Account JSON         |

---

### Create a New Bank Account

**POST** `/api/accounts`

#### Request Body

```json
{
  "customerName": "John Doe",
  "accountNickName": "FamilySavings" //to trigger profanity filter use "badword", "offensive" or "nasty"
}
```

| Field           | Type   | Required | Constraints                    |
| --------------- | ------ | -------- | ------------------------------ |
| customerName    | String | Yes      | Cannot be blank                |
| accountNickName | String | No       | 5-30 characters, not offensive |

#### Successful Response (200 OK)

```json
{
  "id": 1,
  "accountNumber": "d290f1ee-6c54-4b01-90e6-d701748f0851",
  "customerName": "John Doe",
  "accountNickName": "FamilySavings"
}
```

#### Possible Error Responses

- `400 Bad Request`: If nickname invalid, customerName missing, or more than 5 accounts exist
- `503 Service Unavailable`: If database is down

---

### Get an Existing Bank Account

**GET** `/api/accounts/{id}`

#### Path Parameter

- `id` â€” (Long) ID of the account

#### Successful Response (200 OK)

```json
{
  "id": 1,
  "accountNumber": "d290f1ee-6c54-4b01-90e6-d701748f0851",
  "customerName": "John Doe",
  "accountNickName": "FamilySavings"
}
```

#### Possible Error Responses

- `404 Not Found`: If no account found with given ID
- `503 Service Unavailable`: If database is down

---
